<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link id="stylesheet" rel="stylesheet" href="stylesheets/main-default.css">
    <script src="stylesheets/styler.js"></script>
</head>
<body>
    <h2>
        <i style="margin-right: 14px; rotate: 90deg;" class="fa-brands fa-hive"></i>
        Portile<span>&#8709;</span>Social
    </h2>
    <div class="login-box">
        <h1 id="auth-text">Enter your auth key to continue.</h1>
        <input type="password" id="fake-password" name="email" style="display:none;"> 
        <input autocomplete="off" oninput="checkPassword()" id="password-input" placeholder="Enter password..." type="text" readonly onfocus="this.removeAttribute('readonly');"/>
        <button onclick="login()">Login</button>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script>
        async function hashPassword(password) {
            const hash = CryptoJS.SHA256(password);
            return hash.toString(CryptoJS.enc.Hex);
        }

        async function login() {
            const inputField = document.getElementById('password-input');
            let passwordHash = await hashPassword(inputField.value);

            if (document.getElementById('auth-text').textContent.includes("auth")) {
                if (passwordHash === 'd9bb3e53c75c923ef9d59a1696cf3c872979ff238a43e4582fdfcc9b6f924d38') {
                    window.location.href = 'main.html';
                } else {
                    alert('Incorrect password!');
                }
            } else {
                if (passwordHash === 'f02025c8dbb73d87bba47fc8c437640d79cd79b97bde5c22fbd69a2033e5d10f') {
                    window.location.href = 'main.html';
                } else {
                    alert('Your SSO key is incorrect.');
                    window.location.href = 'index.html';
                }
            }
        }

        const inputField = document.getElementById('password-input');
        inputField.addEventListener('keydown', async function(event) {
            if (event.code === 'Enter') {
                event.preventDefault();
                await login();
            }
        });
    </script>
</body>
</html>
